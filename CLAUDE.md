# CLAUDE.md

이 문서는 Claude Code(claude.ai/code)가 이 저장소의 코드 작업 시 참고하는 가이드입니다.

## 자주 사용하는 개발 명령어

### 빌드 & 실행
```bash
# 개발 서버 실행
pnpm dev
```

## 프로젝트 아키텍처

Shinatga(시냇가)는 설교 말씀, 큐티 노트 등 기록을 위한 프론트엔드 애플리케이션입니다.

### 기술 스택
- **프레임워크**: Nextjs15+ + TypeScript
- **빌드 도구**: Vite 7
- **라우팅**: React Router DOM 7
- **상태 관리**: Zustand 5
- **유효성 검증**: Valibot 1.1
- **스타일링**: Tailwind CSS 4.1
- **코드 품질**: ESLint + TypeScript

### 패키지 구조
```
TODO: 작성 필요
```

### 설정
- Tailwind CSS v4: CSS-first 방식 (`@import "tailwindcss"`)
- API 클라이언트: `src/utils/apiClient.ts`
- 환경 변수: `src/utils/env.ts`

## 개발 가이드라인

### 개발 원칙

1. **SIMPLE IS BEST** - 단순하고 명확한 것이 최고다.

2. **YAGNI (You Aren't Gonna Need It)** - 지금 당장 필요하지 않으면 만들지 않는다.

3. **스펙 우선 개발** - 항상 스펙의 모호함이 없고 충분히 합의가 이루어진 다음에 코딩을 진행한다.

4. **사실 중심 커뮤니케이션** - 구체적 사실과 결정에 초점을 맞춘다.

### 작업 워크플로우

모든 작업은 다음 3단계를 **반드시** 순차적으로 진행합니다:

#### 1단계: 탐색 (Explore) 🔍

**목적**: 요구사항 이해, 관련 코드 파악, 현재 구조 분석

**수행 작업**:
- 사용자의 요구사항을 명확히 이해
- 관련 파일 읽기 (Read, Grep, Glob 툴 사용)
- 기존 코드 구조와 패턴 분석
- 의존성 및 영향 범위 파악
- 불명확한 부분은 질문하여 명확화

**⚠️ 이 단계에서 절대 금지**:
- ❌ Edit 툴 사용 (파일 수정 도구)
- ❌ Write 툴 사용 (파일 생성 도구)
- ❌ 코드 수정 행위
- ❌ 추측에 기반한 작업 진행

**✅ 이 단계 완료 조건**:
- 요구사항을 완전히 이해했다
- 수정해야 할 파일들을 식별했다
- 기존 코드의 동작 방식을 파악했다
- 변경이 미칠 영향을 예측할 수 있다

#### 2단계: 계획 (Plan) 📋

**목적**: 작업 계획 수립 및 사용자와의 합의

**수행 작업**:
1. **작업 내용 설명**: 무엇을 할 것인지 명확히 서술
2. **이유 설명**: 왜 이 작업이 필요한지, 어떤 문제를 해결하는지
3. **변경 계획 명시**:
   - 수정할 파일 목록
   - 각 파일에서 변경할 내용
   - 새로 추가할 파일 (필요시)
4. **영향 분석**: 변경이 다른 부분에 미치는 영향
5. **구현 방법**: 어떻게 구현할 것인지 기술적 접근법

**필수 확인사항**:
```
✓ 왜 이 파일을 수정해야 하는가?
✓ 어떤 내용을 변경할 것인가?
✓ 변경이 미치는 영향은 무엇인가?
✓ 다른 접근 방법은 없는가?
✓ 기존 코드 스타일과 일관성이 있는가?
```

**TodoWrite 툴 사용**:
- 복잡한 작업의 경우 TodoWrite 툴로 작업 항목 나열
- 각 단계를 명확히 정의
- 진행 상황 추적 가능하도록 구성

**⚠️ 이 단계에서도 금지**:
- ❌ Edit/Write 툴 사용 (아직 승인 전)
- ❌ 계획 없이 즉시 코드 작성
- ❌ 사용자 확인 없이 진행

**✅ 이 단계 완료 조건**:
- 작업 계획을 명확히 제시했다
- **사용자가 계획을 이해하고 승인했다**
- 다음 단계로 진행해도 된다는 확인을 받았다

#### 3단계: 실행 (Execute) ⚡

**목적**: 승인된 계획에 따라 코드 수정 수행

**Edit 툴 사용 전 필수 체크**:

```
필수 전제조건 (모두 YES여야 함):
□ 사용자의 의도를 완전히 이해했는가?
□ 작업 방향에 대한 합의가 이루어졌는가?
□ 무엇을 왜 수정하는지 설명했는가?
□ 사용자가 명시적으로 승인했는가?
```

**Edit 툴 사용 시 원칙**:

1. **사용 직전 설명**:
   ```
   "{파일명}에서 {기능}을 {목적}을 위해 수정합니다."
   ```

2. **변경 내용 요약**:
   - 어떤 함수/컴포넌트를 수정하는지
   - 무엇을 추가/삭제/변경하는지
   - 예상되는 결과

3. **단계적 실행 (검토 가능한 작업 단위)**:

   **핵심 원칙: 사용자가 쉽게 검토할 수 있는 양만큼만 작성한다.**

   - **최대 작업 단위: 컴포넌트/함수 1개**
     - 하나의 컴포넌트나 함수 정도가 검토 가능한 최대 크기
     - 함수가 짧고 서로 밀접하게 연관되어 있으면 2-3개도 가능

   - **검토 불가능한 작업 (❌)**:
     - N개의 컴포넌트를 한 번에 작성
     - N개의 페이지를 한 번에 작성
     - N개의 Store를 한 번에 작성
     - 복잡한 로직 여러 개를 한 파일에 한 번에 추가

   - **적절한 작업 예시 (✅)**:
     - 컴포넌트 1개 → 확인 → 다음 컴포넌트
     - 간단한 훅 1-2개 (각 10줄 이하, 관련성 높음)
     - 짧은 유틸 함수 2-3개 (각 5줄 이하, 관련성 높음)
     - 하나의 완결된 기능 (예: Store 1개)

   - **자가 진단 질문**:
     - ✓ "사용자가 이 변경을 10초 안에 이해할 수 있는가?"
     - ✓ "한 눈에 코드의 의도를 파악할 수 있는가?"
     - ✓ "즉시 피드백을 줄 수 있는 크기인가?"

   - **작업 후 반드시 대기**:
     - 각 Write/Edit 완료 → 사용자 확인 대기
     - 피드백 반영 → 다음 단계 진행

4. **검증**:
   - 타입 에러 가능성 확인
   - 기존 기능 영향 최소화
   - 필요시 타입 체크 실행 제안

**⚠️ 주의사항**:
- Edit 툴 사용 = 사용자 승인 완료 후에만
- 계획에 없던 수정 발견 시 → 다시 2단계로 복귀
- 오류 발생 시 → 즉시 사용자에게 보고
- 불확실한 부분 → 실행 전에 질문

**✅ 실행 완료 후**:
- 변경 사항 요약 제공
- 타입 체크/린트 필요 여부 안내
- 추가 작업 필요 시 2단계로 복귀

#### 핵심 원칙

1. **탐색 → 계획 → 실행** 순서는 절대 불변
2. **Edit 툴 = 사용자 승인 후에만**
3. **의심스러우면 질문하라**
4. **계획 없는 코드 수정 금지**
5. **변경 전 항상 이유 설명**

### 코딩 스타일

**코드가 스스로 설명해야 한다.**

- ❌ **JSDoc 주석 사용 금지**
- ✅ **명확한 함수명, 변수명** + TypeScript 타입
- ✅ **복잡한 로직에만 `//` 코멘트**

### Tailwind CSS 스타일링

- **Utility-first 원칙**: 클래스는 JSX 내 인라인으로 직접 작성
- **조건부 스타일**: 템플릿 리터럴로 JSX 내에서 처리
  ```tsx
  className={`base-class ${condition ? 'conditional-class' : ''}`}
  ```
- **변수 분리 금지**: className 변수로 분리하지 않음

### 중요 규칙

- **라이브러리 사용 전 최신 문서 확인**
- **Breaking changes 검토 필수**
- **localhost API는 curl로 접근** (WebFetch 불가)
